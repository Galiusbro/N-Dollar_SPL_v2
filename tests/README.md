<!-- # Тестирование N-Dollar Exchange

## Текущее состояние

В текущей конфигурации тесты проверяют:

- Инициализацию тестовых аккаунтов
- Подключение ко всем необходимым программам и проверку их идентификаторов

## Проблемы и ограничения

1. **Метаданные Metaplex**

   - Локальная тестовая среда не имеет запущенной Metaplex Metadata Program
   - Это приводит к ошибке `Program account is not executable` при попытке инициализации N-Dollar токена

2. **Связанные ошибки**
   - Ошибка при инициализации токена препятствует проверке функции минтинга
   - Невозможно протестировать полный цикл работы с токеном

## Тестирование на devnet

Для полноценного тестирования с метаданными Metaplex, добавлены тесты, которые работают на devnet. Чтобы запустить эти тесты:

1. **Подготовка кошелька**

   - Убедитесь, что у вас настроен Solana CLI кошелек с SOL на devnet
   - Кошелек должен находиться по адресу `~/.config/solana/id.json`
   - Для получения девнет SOL: `solana airdrop 1 --url devnet`

2. **Установка зависимостей**

   ```bash
   yarn install
   ```

3. **Запуск тестов на devnet**
   ```bash
   yarn test:devnet
   ```

Это запустит специальный тестовый файл `n-dollar-exchange-devnet.ts`, который:

- Создает фиктивный URI для метаданных токена
- Инициализирует N-Dollar токен с реальными метаданными на devnet
- Минтит токены
- Выполняет транзакции через реальную Metaplex Metadata Program

## Метаданные и URI

В реальном проекте для создания метаданных необходимо:

1. **Создать JSON-файл с метаданными**, включающий:

   - Имя, символ, описание токена
   - Ссылку на изображение/логотип
   - Другие атрибуты

2. **Разместить файл метаданных** в децентрализованном хранилище:

   - IPFS (например, через Pinata, NFT.Storage)
   - Arweave (постоянное хранилище)

3. **Использовать полученный URI** при создании токена

В тестовом файле мы используем мок-функцию, но в реальном проекте вам понадобятся:

```bash
# Для IPFS
npm install ipfs-http-client

# Для Arweave
npm install arweave
```

## Запуск локальных тестов

```bash
# Запуск всех тестов
yarn test

# Запуск с подробным выводом
ANCHOR_VERBOSE=true yarn test

# Запуск с пропуском сборки (для быстрого повторного тестирования)
anchor test --skip-build
``` -->
